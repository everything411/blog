import{_ as e,c as r,o as a,U as t}from"./chunks/framework.3nm9Cb6L.js";const c="/assets/control-gcuservice-error-log.MwRlx5k0.png",o="/assets/mechrevo-gcuservice-before.QnKSHtwM.png",i="/assets/mechrevo-gcuservice-after.lcBwZ8xo.png",g=JSON.parse('{"title":"机械革命40系电竞控制台GCUService频繁崩溃问题","description":"修改GCUService可执行程序，解决机械革命40系电竞控制台GCUService频繁崩溃问题的方法","frontmatter":{"date":"2023-07-25T00:00:00.000Z","title":"机械革命40系电竞控制台GCUService频繁崩溃问题","tags":["破解逆向","机械革命控制台"],"description":"修改GCUService可执行程序，解决机械革命40系电竞控制台GCUService频繁崩溃问题的方法"},"headers":[],"relativePath":"posts/patch-mechrevo-gcuservice.md","filePath":"posts/patch-mechrevo-gcuservice.md"}'),s={name:"posts/patch-mechrevo-gcuservice.md"},n=t('<h1 id="机械革命40系电竞控制台gcuservice频繁崩溃问题分析和解决" tabindex="-1">机械革命40系电竞控制台GCUService频繁崩溃问题分析和解决 <a class="header-anchor" href="#机械革命40系电竞控制台gcuservice频繁崩溃问题分析和解决" aria-label="Permalink to &quot;机械革命40系电竞控制台GCUService频繁崩溃问题分析和解决&quot;">​</a></h1><h2 id="环境与问题" tabindex="-1">环境与问题 <a class="header-anchor" href="#环境与问题" aria-label="Permalink to &quot;环境与问题&quot;">​</a></h2><p>机型蛟龙16k 4060版本，电竞控制台为官网在2023/04/21发布的5.17.49.6版本，系统Windows 11。</p><p>症状为在“控制面板&gt;系统和安全&gt;安全和维护&gt;维护&gt;查看可靠性历史记录”中出现大量GCUService已停止工作的记录，如下图所示。</p><p><img src="'+c+'" alt="控制台后台服务崩溃日志"></p><h2 id="问题分析" tabindex="-1">问题分析 <a class="header-anchor" href="#问题分析" aria-label="Permalink to &quot;问题分析&quot;">​</a></h2><p>GCUService是一个.NET程序，且没有混淆和加密，因此可以使用dnSpy对GCUService进行反编译，获取几乎无损的程序源码。</p><p>结合系统日志查看器中记录的程序崩溃日志中对System.Management.dll中方法的调用，在控制台源码中定位到 GCUService/MyControlCenter/CustomizeCtrl.cs，GCUService/MyControlCenter/HardwareInfoCollect.cs，GCUService/MyECIO/AcpiCtrl.cs三个文件。这三个文件中存在用foreach对ManagementObjectSearcher进行循环的代码，而此处这些代码里大部分都没有做异常处理，导致在System.Management.dll里抛出的异常导致程序异常退出。</p><p>因此解决方案非常简单粗暴，给这些foreach都套上一个try catch程序就不会崩溃了，因此我们直接用dnspy修改程序源码然后重新编译即可。这里给出其中一处的修改。</p><p><img src="'+o+'" alt="修改前"></p><p><img src="'+i+'" alt="修改后"></p><h2 id="修复操作方法" tabindex="-1">修复操作方法 <a class="header-anchor" href="#修复操作方法" aria-label="Permalink to &quot;修复操作方法&quot;">​</a></h2><p>下面直接给出修改后的GCUService程序，点击<a href="https://wwi.lanzoup.com/ibggH13gbfna" target="_blank" rel="noreferrer">此处</a>下载，将原有的GCUService替换即可解决问题。</p><p>第一步：打开路径<code>C:\\Program Files\\OEM\\机械革命电竞控制台\\UniwillService\\MyControlCenter</code>，找到GCUService.exe，改名为GCUService.exe.bak作为备份。</p><p>第二步：下载链接里的GCUService.exe，复制到上面的路径里面。</p><p>第三步：重启电脑。</p><h2 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to &quot;注意事项&quot;">​</a></h2><p>此处提供的文件针对的是40系的电竞控制台，版本为5.17.49.6版本，其中GCUService的版本是1.0.2.70，请确认是40系的电脑，完全一样的控制台版本再替换，否则可能会出现问题。</p><p>此外这个问题目前来看对电脑运行影响不大，如果没有强迫症其实可以不用管。</p>',19),p=[n];function l(h,d,v,C,_,m){return a(),r("div",null,p)}const u=e(s,[["render",l]]);export{g as __pageData,u as default};
